---
title: å®žçŽ°ä¸€ä¸ªé“¾è¡¨
date: 2022-01-12
tags:
  - æ•°æ®ç»“æž„
  - é“¾è¡¨
  - JavaScript
---

## å•å‘é“¾è¡¨

``` javascript
class Node {
    constructor(value, next) {
        this.value = value;
        this.next = next;
    }
}
class LinkedList {
    constructor() {
        this.head = null;
        this.length = 0;
    }
    add(value) {
        const $node = new Node(value);
        if (!this.head) {
            this.head = $node;
        }
        else {
            let node = this.head;
            while(node.next) {
                node = node.next;
            }
            node.next = $node;
        }
        this.length++;
    }
    findIndex(value) {
        let node = this.head;
        let index = 0;
        while(node) {
            if (node.value === value) {
                return index;
            }
            node = node.next;
            index++;
        }
        return -1;
    }
    findNodeFromValue(value) {
        let node = this.head;
        while(node) {
            if (node.value === value) {
                return node;
            }
            node = node.next;
        }
    }
    findNodeFromIndex(index) {
        let node = this.head;
        let $index = 0;
        while(node) {
            if ($index === index) {
                return node;
            }
            node = node.next;
            $index++;
        }
    }
    findPrevNode(index) {
        let node = this.head;
        if (index === 0) {
            return node;
        }
        let $index = 0;
        while(node) {
            if ($index === index - 1) {
                return node;
            }
            node = node.next;
            $index++;
        }
    }
    remove(index) {
        const prevNode = this.findPrevNode(index);
        const removeNode = this.findNodeFromIndex(index);
        prevNode.next = removeNode.next;
        removeNode.next = null;
        this.length--;
    }
}

// æ¨¡æ‹Ÿä½¿ç”¨åœºæ™¯ðŸ‘Œ
const list = new LinkedList();
list.add('å¼ ä¸‰');
list.add('æŽå››');
list.add('çŽ‹äº”');
list.add('å´å…­');
list.remove(1);
console.log('list: ', list);
```

## åŒå‘é“¾è¡¨
``` javascript
class Node {
    constructor(value, prev, next) {
        this.value = value;
        this.prev = prev;
        this.next = next;
    }
}
class DoubleList {
    constructor() {
        this.head = null;
        this.length = 0;
    }
    find(index) {
        let $index = 0;
        let node = this.head;
        while(node) {
            if ($index === index) {
                return node;
            }
            node = node.next;
            $index++;
        }
    }
    lastNode() {
        let node = this.head;
        if (!node) {
            return node;
        }
        while(node.next) {
            node = node.next;
        }
        return node;
    }
    add(value) {
        const $node = new Node(value);
        let lastNode = this.lastNode();
        if (!lastNode) {
            this.head = $node;
        }
        else {
            lastNode.next = $node;
            $node.prev = lastNode;
        }
        this.length++;
    }
    remove(index) {
        let node = this.find(index);
        const prev = node.prev;
        const next = node.next;
        node.prev = null;
        node.next = null;
        prev.next = next;
        next.prev = prev;
        this.length--;
    }
}

// æ¨¡æ‹Ÿä½¿ç”¨åœºæ™¯ðŸ‘Œ
const list = new DoubleList();
list.add(100);
list.add(200);
list.add(300);
list.add(400);
list.remove(1);
console.log(list);
```

## å¾ªçŽ¯é“¾è¡¨
```javascript
class Node {
    constructor(value, next) {
        this.value = value;
        this.next = next;
    }
}
class CircleList {
    constructor() {
        this.head = null;
        this.length = 0;
    }
    find(index) {
        let $index = 0;
        let node = this.head;
        while (node) {
            if ($index === index) {
                return node;
            }
            node = node.next;
            $index++;
        }
    }
    findPrev(index) {
        let $index = 0;
        let node = this.head;
        if (!node) {
            return null;
        }
        while (node) {
            if ($index === index - 1) {
                return node;
            }
            node = node.next;
            $index++;
        }
    }
    findLastNode() {
        let node = this.head;
        if (!node.next) {
            return node;
        }
        else {
            while(node.next && node.next !== this.head) {
                node = node.next;
            }
        }
        return node;
    }
    add(value) {
        let node = this.head;
        const newNode = new Node(value);
        if (!node) {
            this.head = newNode;
            newNode.next = this.head;
        }
        else {
           const lastNode = this.findLastNode();
           newNode.next = this.head;
           lastNode.next = newNode;
        }
        this.length++;
    }
    remove(index) {
        const node = this.find(index);
        const prevNode = this.findPrev(index);
        prevNode.next = node.next;
        node.next = null;
    }
}

// æ¨¡æ‹Ÿä½¿ç”¨åœºæ™¯ðŸ‘Œ
const list = new CircleList();
list.add(100);
list.add(200);
list.add(300);
list.add(400);
list.remove(1);
console.log(list);
```

## åˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰çŽ¯

```javascript
// ç”Ÿæˆé“¾è¡¨
const list = new CircleList();
list.add(100);
list.add(200);
list.add(300);
list.add(400);

// æ–¹æ³•ä¸€: åˆ©ç”¨setç‰¹æ€§åˆ¤æ–­
const isCircle = chain => {
    let set = new Set();
    let node = chain.head;
    while(node) {
        if (set.has(node)) {
            return true;
        }
        set.add(node);
        node = node.next;
    }
    return false;
};
// æ¨¡æ‹Ÿä½¿ç”¨åœºæ™¯ðŸ‘Œ
console.log(isCircle(list));

// æ–¹æ³•äºŒ: åˆ©ç”¨å¿«æ…¢æŒ‡é’ˆ
const hasCycle = chain => {
    let fast = chain.head,
        slow = chain.head;
    // é›¶ä¸ªç»“ç‚¹æˆ–è€…ä¸€ä¸ªç»“ç‚¹ï¼Œè‚¯å®šæ— çŽ¯
    if (fast.next == null || fast.next.next == null) return false;
    while (fast && fast.next) {
        //èµ°ä¸€æ­¥
        slow = slow.next;
        //èµ°äºŒæ­¥
        fast = fast.next.next;
        if (slow === fast) {
            return true;
        }
    }
    return false;
};
console.log(hasCycle(list));
```
